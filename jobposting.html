<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-site-verification" content="PRRrt7X2_Bozeoj4s2PxyAnvzWzzv97LjlX_u1QBjQ" />
  
  <!-- Google AdSense script -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9084951287340288"></script>
  
  <!-- External CSS (header styles only) -->
  <link rel="stylesheet" href="style.css"/>
  
  <title>User Submitted Jobs</title>

  <!-- Inline CSS (everything except header) -->
  <style>
    /* Reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      background: #f4f6f9;
      color: #333;
      line-height: 1.6;
    }

    /* Section Title */
    h1 {
      text-align: center;
      margin: 25px 0 15px;
      font-size: 1.8rem;
      color: #2c3e50;
    }

    /* Job List */
    .job-list {
      max-width: 1000px;
      margin: 0 auto;
      padding: 0 15px 40px;
      display: grid;
      gap: 1.5rem;
    }

    /* Job Cards */
    .job-card {
      background: #fff;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .job-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 18px rgba(0,0,0,0.15);
    }
    .job-card h3 {
      margin-top: 0;
      color: #007BFF;
      font-size: 1.3rem;
      margin-bottom: 10px;
    }
    .job-card p {
      margin: 6px 0;
    }
    .job-card b {
      color: #2c3e50;
    }

    /* Links / Buttons */
    .job-card a {
      display: inline-block;
      margin-top: 10px;
      padding: 8px 14px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    .job-card a[href*="http"]:first-of-type {
      background: #28a745;
      color: #fff;
    }
    .job-card a[href*="http"]:first-of-type:hover {
      background: #218838;
    }
    .job-card .ad-link {
      background: #007BFF;
      color: #fff;
      margin-left: 8px;
    }
    .job-card .ad-link:hover {
      background: #0056b3;
    }
  </style>
</head>
<body>
  <header>
    <nav>
      <a href="index.html">Home</a> |
      <a href="jobposting.html">User Jobs</a> |
      <a href="about.html">About Us</a> |
      <a href="chat.html">Discussion</a> |
      <a href="privacy.html">Privacy Policy</a> |
      <a href="disclaimer.html">Disclaimer</a> |
      <a href="terms.html">Terms & Conditions</a> |
      <a href="contact.html">Contact Us</a> |
      <a href="https://forms.gle/ivBbcnFWXPNTNwyg9" target="_blank">‚ûï Post a Job</a>
    </nav>
    <h1>Job Advertisements</h1>
  </header>

  <h1>üìå User Submitted Jobs</h1>
  <div id="jobs" class="job-list">Loading jobs...</div>

  <script>
    const csvUrl = "https://docs.google.com/spreadsheets/d/1ySAiaip6_80lNkTEAMiAZ_U2j9w0T4hcglMIsGa4h5c/export?format=csv&sheet=Sheet1";

    function parseCSV(str) {
      const rows = [];
      let current = [];
      let inQuotes = false;
      let value = "";

      for (let i = 0; i < str.length; i++) {
        const char = str[i];
        const nextChar = str[i+1];

        if (char === '"' && inQuotes && nextChar === '"') {
          value += '"';
          i++;
        } else if (char === '"') {
          inQuotes = !inQuotes;
        } else if (char === ',' && !inQuotes) {
          current.push(value);
          value = "";
        } else if ((char === '\n' || char === '\r') && !inQuotes) {
          if (value || value === "") current.push(value);
          if (current.length > 1 || current[0] !== "") rows.push(current);
          current = [];
          value = "";
          if (char === '\r' && nextChar === '\n') i++;
        } else {
          value += char;
        }
      }
      if (value || value === "") current.push(value);
      if (current.length > 0) rows.push(current);
      return rows;
    }

    fetch(csvUrl)
      .then(res => res.text())
      .then(data => {
        const rows = parseCSV(data);
        const jobs = rows.slice(1).filter(r => r.length > 1);

        const jobsContainer = document.getElementById("jobs");
        jobsContainer.innerHTML = "";

        if (jobs.length === 0) {
          jobsContainer.innerHTML = "<p>No user-submitted jobs yet.</p>";
          return;
        }

        jobs.forEach(r => {
          const job = {
            timestamp: r[0] || "",
            title: r[1] || "",
            company: r[2] || "",
            location: r[3] || "",
            deadline: r[4] || "",
            type: r[5] || "",
            description: r[6] || "",
            applyLink: r[7] || "#",
            originalAd: r[8] || ""
          };

          const jobCard = document.createElement("div");
          jobCard.className = "job-card";
          jobCard.innerHTML = `
            <h3>${job.title}</h3>
            <p><b>Company:</b> ${job.company}</p>
            <p><b>Location:</b> ${job.location}</p>
            <p><b>Deadline:</b> ${job.deadline}</p>
            <p><b>Type:</b> ${job.type}</p>
            <p>${job.description}</p>
            <a href="${job.applyLink}" target="_blank">Apply Now</a>
            ${job.originalAd ? `<a class="ad-link" href="${job.originalAd}" target="_blank">üìÑ View Original Advertisement</a>` : ""}
          `;
          jobsContainer.appendChild(jobCard);
        });
      })
      .catch(err => {
        console.error("Error loading jobs:", err);
        document.getElementById("jobs").innerHTML = "<p>‚ùå Failed to load user-submitted jobs.</p>";
      });
  </script>
</body>
</html>
