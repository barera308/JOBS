<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Professional CV Creator</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: 'Inter', sans-serif; }
    .dynamic-item { position: relative; }
    .remove-btn { position: absolute; top: 0; right: 0; transform: translate(50%, -50%); }
    .cv-section h2 { border-bottom-width: 2px; }
    #cv-preview { min-height: 500px; }
  </style>
</head>
<body class="bg-gray-100">

  <nav class="bg-white shadow sticky top-0 z-50 p-4 flex justify-between">
    <a href="#" class="text-xl font-bold text-blue-600">CV Creator</a>
  </nav>

  <div class="p-4 max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8">

    <!-- Input Section -->
    <div class="space-y-6">
      <section class="bg-blue-50 p-6 rounded-xl border border-blue-200 space-y-4">
        <h2 class="text-xl font-semibold text-blue-700">Personal Details</h2>
        <input id="nameInput" type="text" placeholder="Full Name" class="w-full rounded-md border p-2">
        <input id="pictureInput" type="file" accept="image/*" class="w-full text-sm">
        <input id="addressInput" type="text" placeholder="Address" class="w-full rounded-md border p-2">
        <input id="emailInput" type="email" placeholder="Email" class="w-full rounded-md border p-2">
        <input id="phoneInput" type="tel" placeholder="Phone" class="w-full rounded-md border p-2">
        <input id="dobInput" type="text" placeholder="Date of Birth" class="w-full rounded-md border p-2">
        <input id="nationalityInput" type="text" placeholder="Nationality" class="w-full rounded-md border p-2">
        <textarea id="linksInput" placeholder="Professional Links (one per line)" class="w-full rounded-md border p-2"></textarea>
      </section>

      <section class="bg-indigo-50 p-6 rounded-xl border border-indigo-200">
        <h2 class="text-xl font-semibold text-indigo-700">Short Bio</h2>
        <textarea id="bioInput" placeholder="Short Bio" class="w-full rounded-md border p-2"></textarea>
      </section>

      <section class="bg-purple-50 p-6 rounded-xl border border-purple-200">
        <h2 class="text-xl font-semibold text-purple-700">Summary</h2>
        <textarea id="summaryInput" placeholder="Summary" class="w-full rounded-md border p-2"></textarea>
      </section>

      <section class="bg-teal-50 p-6 rounded-xl border border-teal-200">
        <h2 class="text-xl font-semibold text-teal-700">Academic Qualifications</h2>
        <div id="qualifications-container" class="space-y-4"></div>
        <button id="addQualification" class="px-4 py-2 bg-teal-200 text-teal-800 rounded">+ Add Qualification</button>
      </section>

      <section class="bg-orange-50 p-6 rounded-xl border border-orange-200">
        <h2 class="text-xl font-semibold text-orange-700">Professional Experience</h2>
        <div id="experience-container" class="space-y-4"></div>
        <button id="addExperience" class="px-4 py-2 bg-orange-200 text-orange-800 rounded">+ Add Experience</button>
      </section>

      <button id="downloadButton" class="w-full bg-blue-600 text-white py-2 rounded">Download as PDF</button>
      <button id="downloadWordButton" class="w-full bg-green-600 text-white py-2 rounded">Download as Word</button>
    </div>

    <!-- Preview Section -->
    <div class="bg-gray-50 rounded-xl p-6 overflow-y-auto max-h-[80vh] sticky top-20">
      <h2 class="text-xl font-bold text-gray-800 mb-4 text-center">Live Preview</h2>
      <div id="cv-preview" class="bg-white p-6 rounded-lg shadow border">
        <div class="flex items-center space-x-4 mb-4">
          <div id="picturePreview" class="w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center text-xs overflow-hidden">No Image</div>
          <div>
            <h1 id="namePreview" class="text-2xl font-bold">Your Name</h1>
            <div id="contactPreview" class="text-sm text-gray-600"></div>
            <div id="linksPreview" class="text-sm text-blue-600"></div>
          </div>
        </div>
        <div class="space-y-4">
          <section class="cv-section"><h2>Short Bio</h2><p id="bioPreview">Your bio here</p></section>
          <section class="cv-section"><h2>Summary</h2><p id="summaryPreview">Your summary here</p></section>
          <section class="cv-section"><h2>Qualifications</h2><div id="qualifications-preview-container"></div></section>
          <section class="cv-section"><h2>Experience</h2><div id="experience-preview-container"></div></section>
        </div>
      </div>
    </div>

  </div>

  <script>
    const nameInput = document.getElementById("nameInput");
    const namePreview = document.getElementById("namePreview");
    const pictureInput = document.getElementById("pictureInput");
    const picturePreview = document.getElementById("picturePreview");
    const addressInput = document.getElementById("addressInput");
    const emailInput = document.getElementById("emailInput");
    const phoneInput = document.getElementById("phoneInput");
    const dobInput = document.getElementById("dobInput");
    const nationalityInput = document.getElementById("nationalityInput");
    const linksInput = document.getElementById("linksInput");
    const contactPreview = document.getElementById("contactPreview");
    const linksPreview = document.getElementById("linksPreview");
    const bioInput = document.getElementById("bioInput");
    const bioPreview = document.getElementById("bioPreview");
    const summaryInput = document.getElementById("summaryInput");
    const summaryPreview = document.getElementById("summaryPreview");

    const qualificationsContainer = document.getElementById("qualifications-container");
    const qualificationsPreviewContainer = document.getElementById("qualifications-preview-container");
    const experienceContainer = document.getElementById("experience-container");
    const experiencePreviewContainer = document.getElementById("experience-preview-container");

    function updateContactInfo() {
      contactPreview.innerHTML = `
        <p>${addressInput.value || ''}</p>
        <p>${emailInput.value || ''}</p>
        <p>${phoneInput.value || ''}</p>
        <p>DoB: ${dobInput.value || ''}</p>
        <p>Nationality: ${nationalityInput.value || ''}</p>
      `;
      linksPreview.innerHTML = linksInput.value.split('\n').filter(l => l).map(l => `<a href="${l}" target="_blank">${l}</a>`).join('<br>');
    }

    nameInput.addEventListener("input", () => namePreview.textContent = nameInput.value || "Your Name");
    pictureInput.addEventListener("change", e => {
      const file = e.target.files[0];
      if(file){
        const reader = new FileReader();
        reader.onload = () => picturePreview.innerHTML = `<img src="${reader.result}" class="w-full h-full object-cover"/>`;
        reader.readAsDataURL(file);
      } else picturePreview.innerHTML = "No Image";
    });
    [addressInput,emailInput,phoneInput,dobInput,nationalityInput,linksInput].forEach(i => i.addEventListener("input", updateContactInfo));
    bioInput.addEventListener("input", () => bioPreview.textContent = bioInput.value || "Your bio here");
    summaryInput.addEventListener("input", () => summaryPreview.textContent = summaryInput.value || "Your summary here");

    function addQualificationItem(){
      const itemDiv = document.createElement("div");
      itemDiv.className = "dynamic-item bg-teal-100 p-2 rounded";
      itemDiv.innerHTML = `
        <button class="remove-btn bg-red-500 text-white w-6 h-6 rounded-full">X</button>
        <input type="text" placeholder="Degree" class="degree-input w-full border p-1 rounded">
        <input type="text" placeholder="Institution" class="institution-input w-full border p-1 rounded">
        <input type="text" placeholder="Year" class="year-input w-full border p-1 rounded">
      `;
      qualificationsContainer.appendChild(itemDiv);
      const previewDiv = document.createElement("div");
      qualificationsPreviewContainer.appendChild(previewDiv);

      const updatePreview = () => {
        const degree = itemDiv.querySelector('.degree-input').value;
        const inst = itemDiv.querySelector('.institution-input').value;
        const year = itemDiv.querySelector('.year-input').value;
        previewDiv.innerHTML = `<p>${degree || ''} - ${inst || ''} (${year || ''})</p>`;
      };
      itemDiv.querySelectorAll('input').forEach(i => i.addEventListener('input', updatePreview));
      itemDiv.querySelector('.remove-btn').addEventListener('click', ()=>{itemDiv.remove(); previewDiv.remove();});
    }

    function addExperienceItem(){
      const itemDiv = document.createElement("div");
      itemDiv.className = "dynamic-item bg-orange-100 p-2 rounded";
      itemDiv.innerHTML = `
        <button class="remove-btn bg-red-500 text-white w-6 h-6 rounded-full">X</button>
        <input type="text" placeholder="Position" class="title-input w-full border p-1 rounded">
        <input type="text" placeholder="Company" class="company-input w-full border p-1 rounded">
        <input type="text" placeholder="Dates" class="dates-input w-full border p-1 rounded">
      `;
      experienceContainer.appendChild(itemDiv);
      const previewDiv = document.createElement("div");
      experiencePreviewContainer.appendChild(previewDiv);

      const updatePreview = () => {
        const title = itemDiv.querySelector('.title-input').value;
        const company = itemDiv.querySelector('.company-input').value;
        const dates = itemDiv.querySelector('.dates-input').value;
        previewDiv.innerHTML = `<p>${title || ''} - ${company || ''} (${dates || ''})</p>`;
      };
      itemDiv.querySelectorAll('input').forEach(i => i.addEventListener('input', updatePreview));
      itemDiv.querySelector('.remove-btn').addEventListener('click', ()=>{itemDiv.remove(); previewDiv.remove();});
    }

    document.getElementById("addQualification").addEventListener("click", addQualificationItem);
    document.getElementById("addExperience").addEventListener("click", addExperienceItem);

    document.getElementById("downloadButton").addEventListener("click", () => {
      window.jsPDF = window.jspdf.jsPDF;
      html2canvas(document.getElementById("cv-preview")).then(canvas=>{
        const imgData = canvas.toDataURL('image/png');
        const pdf = new jsPDF('p', 'pt', 'a4');
        const imgProps = pdf.getImageProperties(imgData);
        const pdfWidth = pdf.internal.pageSize.getWidth();
        const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
        pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
        pdf.save(`${nameInput.value || 'CV'}.pdf`);
      });
    });

    document.getElementById("downloadWordButton").addEventListener("click", () => {
      const blob = new Blob([document.getElementById("cv-preview").innerHTML], {type:'application/msword'});
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = `${nameInput.value || 'CV'}.doc`;
      link.click();
    });

  </script>

</body>
</html>
